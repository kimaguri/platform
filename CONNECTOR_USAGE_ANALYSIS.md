# üö® –ê–ù–ê–õ–ò–ó –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –ö–û–ù–ù–ï–ö–¢–û–†–û–í vs –ü–†–Ø–ú–´–• –ö–õ–ò–ï–ù–¢–û–í

## –ü–†–û–ë–õ–ï–ú–ê: –ú—ã –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤!

### ‚ùå –ß–¢–û –î–ï–õ–ê–ï–ú –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:

**–í–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º—ã–µ Supabase –∫–ª–∏–µ–Ω—Ç—ã:**

```typescript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –ø—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
const supabase = await getSupabaseAnonClient(authData.tenantId);
const { data, error } = await supabase.from('entities').select('*');
```

**–ú–µ—Å—Ç–∞ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä—è–º—ã–µ –∫–ª–∏–µ–Ω—Ç—ã:**

1. `services/extensions/src/realtime.ts` - –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `getSupabaseAnonClient()`
2. `services/extensions/src/entities.ts` - –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `getSupabaseAnonClient()`
3. `services/api-gateway/src/auth.ts` - –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã `getSupabaseAnonClient()`
4. –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ –º–µ—Å—Ç–∞...

### ‚úÖ –ö–ê–ö –î–û–õ–ñ–ù–û –ë–´–¢–¨:

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã:**

```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —á–µ—Ä–µ–∑ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä
import { getConnector } from '@connectors/factory';

const connector = await getConnector('supabase', { tenantId: authData.tenantId });
const entities = await connector.query('entities', { select: '*' });
```

## –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ö–û–ù–ù–ï–ö–¢–û–†–û–í:

1. **–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è** - –º–æ–∂–µ–º –ª–µ–≥–∫–æ —Å–º–µ–Ω–∏—Ç—å –ë–î
2. **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
5. **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - –ª—É—á—à–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

## –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

### 1. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤

### 2. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –≥–∞–π–¥

### 3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 4. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## –ü–†–ò–ú–ï–† –ü–†–ê–í–ò–õ–¨–ù–û–ì–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø:

```typescript
// src/services/entities/operations.ts
import { getConnector } from '@connectors/factory';
import type { DatabaseConnector } from '@connectors/interfaces';

export async function listEntities(tenantId: string, entity: string) {
  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä
  const connector = (await getConnector('supabase', {
    tenantId,
    type: 'anon',
  })) as DatabaseConnector;

  return await connector.query(entity, {
    select: '*',
    limit: 100,
  });
}

export async function createEntity(tenantId: string, entity: string, data: any) {
  const connector = (await getConnector('supabase', {
    tenantId,
    type: 'anon',
  })) as DatabaseConnector;

  return await connector.insert(entity, data);
}
```

## –í–´–í–û–î–´:

1. **–ú—ã —Å–æ–∑–¥–∞–ª–∏ –æ—Ç–ª–∏—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤**, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë
2. **–ù—É–∂–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤
3. **–≠—Ç–æ –¥–∞—Å—Ç –Ω–∞–º –≥–∏–±–∫–æ—Å—Ç—å –∏ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ** –≤ —Ä–∞–±–æ—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏
4. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞–Ω–µ—Ç –±–æ–ª–µ–µ —á–∏—Å—Ç–æ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–π**
