# Simplx Platform - ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğ¹ ÑĞ¿Ñ€Ğ°Ğ²Ğ¾Ñ‡Ğ½Ğ¸Ğº

ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğµ Simplx Platform Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸.

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

1. [ĞĞ±Ğ·Ğ¾Ñ€ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹](#Ğ¾Ğ±Ğ·Ğ¾Ñ€-Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹)
2. [API Gateway](#api-gateway)
3. [ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹](#Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹)
4. [Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸](#ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°-Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸)
5. [ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ](#Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ)
6. [Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²](#ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°-ĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²)
7. [Extensions Definitions](#extensions-definitions)
8. [ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²](#Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ-Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ-Ğ½Ğ¾Ğ²Ñ‹Ñ…-Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²)
9. [ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸ ÑÑ€ĞµĞ´Ğ°](#ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ-Ğ¸-ÑÑ€ĞµĞ´Ğ°)

---

## ğŸ— ĞĞ±Ğ·Ğ¾Ñ€ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

### Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          EXTERNAL CLIENTS                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Frontend   â”‚  â”‚   Mobile    â”‚  â”‚  3rd Party  â”‚  â”‚    CLI      â”‚ â”‚
â”‚  â”‚     App     â”‚  â”‚     App     â”‚  â”‚     API     â”‚  â”‚   Tools     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            API GATEWAY                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    /api/v1/* endpoints                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚    CORS     â”‚ â”‚   Tenant    â”‚ â”‚    Auth     â”‚ â”‚   Rate    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Middleware  â”‚ â”‚ Validation  â”‚ â”‚  Handler    â”‚ â”‚ Limiting  â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER MGMT      â”‚ â”‚  TENANT MGMT    â”‚ â”‚ CONTENT MGMT    â”‚
â”‚   SERVICE       â”‚ â”‚    SERVICE      â”‚ â”‚    SERVICE      â”‚
â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ RPC API     â”‚ â”‚ â”‚ â”‚ RPC API     â”‚ â”‚ â”‚ â”‚ RPC API     â”‚ â”‚
â”‚ â”‚ Functions   â”‚ â”‚ â”‚ â”‚ Functions   â”‚ â”‚ â”‚ â”‚ Functions   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Business    â”‚ â”‚ â”‚ â”‚ Business    â”‚ â”‚ â”‚ â”‚ Business    â”‚ â”‚
â”‚ â”‚ Logic       â”‚ â”‚ â”‚ â”‚ Logic       â”‚ â”‚ â”‚ â”‚ Logic       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Resource     â”‚ â”‚ â”‚ â”‚Admin DB     â”‚ â”‚ â”‚ â”‚Resource     â”‚ â”‚
â”‚ â”‚Resolver     â”‚ â”‚ â”‚ â”‚Access       â”‚ â”‚ â”‚ â”‚Resolver     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚                     â”‚
         â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CONNECTOR SYSTEM                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Supabase   â”‚ â”‚ PostgreSQL  â”‚ â”‚  MongoDB    â”‚ â”‚   Future    â”‚   â”‚
â”‚  â”‚  Adapter    â”‚ â”‚  Adapter    â”‚ â”‚  Adapter    â”‚ â”‚  Adapters   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚                     â”‚
         â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATABASES                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Admin     â”‚ â”‚  Tenant 1   â”‚ â”‚  Tenant 2   â”‚ â”‚  Tenant N   â”‚   â”‚
â”‚  â”‚  Supabase   â”‚ â”‚  Database   â”‚ â”‚  Database   â”‚ â”‚  Database   â”‚   â”‚
â”‚  â”‚ (Tenants)   â”‚ â”‚ (Supabase)  â”‚ â”‚(PostgreSQL) â”‚ â”‚ (MongoDB)   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

1. **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´** - Ğ’ÑĞµ Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€Ñ‹ Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ñ‹ ĞºĞ°Ğº Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸, Ğ½Ğµ ĞºĞ»Ğ°ÑÑÑ‹
2. **Multi-tenant Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ** - ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚ Ğ¸Ğ¼ĞµĞµÑ‚ ÑĞ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½ÑƒÑ Ğ‘Ğ” Ğ¸ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
3. **Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Gateway** - Ğ•Ğ´Ğ¸Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
4. **Adapter Pattern** - Ğ£Ğ½Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¼ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼ Ğ‘Ğ”
5. **RPC ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ñ** - Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğµ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Encore RPC

---

## ğŸŒ API Gateway

### ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ

API Gateway ÑĞ»ÑƒĞ¶Ğ¸Ñ‚ ĞµĞ´Ğ¸Ğ½Ğ¾Ğ¹ Ñ‚Ğ¾Ñ‡ĞºĞ¾Ğ¹ Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… API Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ², Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡Ğ¸Ğ²Ğ°Ñ:

- Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½ÑƒÑ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ¾Ğ²
- Rate limiting Ğ¸ CORS
- ĞŸÑ€Ğ¾ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğº Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Gateway

```
src/gateway/
â”œâ”€â”€ encore.service.ts           # Service definition Ñ middleware
â”œâ”€â”€ auth.ts                     # AuthHandler Ğ¸ Gateway ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”œâ”€â”€ endpoints/                  # ĞŸÑ€Ğ¾ĞºÑĞ¸Ñ€ÑƒÑÑ‰Ğ¸Ğµ endpoints
â”‚   â”œâ”€â”€ user-endpoints.ts       # User API proxy endpoints
â”‚   â”œâ”€â”€ tenant-endpoints.ts     # Tenant API proxy endpoints
â”‚   â””â”€â”€ content-endpoints.ts    # Content API proxy endpoints
â”œâ”€â”€ middleware/                 # Gateway middleware
â”‚   â”œâ”€â”€ cors.ts                 # CORS handling
â”‚   â”œâ”€â”€ tenant-validation.ts    # Tenant validation
â”‚   â”œâ”€â”€ rate-limiting.ts        # Rate limiting
â”‚   â””â”€â”€ logging.ts              # Request/response logging
â””â”€â”€ utils/
    â””â”€â”€ service-clients.ts      # RPC client imports
```

### Middleware Stack

Middleware Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ÑÑ Ğ² ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾Ğ¼ Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞµ:

```
Request â†’ CORS â†’ Tenant Validation â†’ Authentication â†’ Rate Limiting â†’ Logging â†’ Service
```

#### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ middleware ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:

```typescript
// src/gateway/encore.service.ts
import { Service } from 'encore.dev';
import { corsMiddleware } from './middleware/cors';
import { tenantValidationMiddleware } from './middleware/tenant-validation';
import { rateLimitMiddleware } from './middleware/rate-limiting';
import { loggingMiddleware } from './middleware/logging';

export default new Service('api-gateway', {
  middlewares: [
    corsMiddleware, // 1. CORS headers
    tenantValidationMiddleware, // 2. X-Tenant-ID validation
    rateLimitMiddleware, // 3. Rate limiting
    loggingMiddleware, // 4. Request logging
  ],
});
```

### URL Schema

Ğ’ÑĞµ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğµ API Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑ `/api/v1/`:

```
Authentication:     /api/v1/auth/*
User Management:    /api/v1/users/*
Tenant Management:  /api/v1/tenants/*
Content Management: /api/v1/content/*
Health & Metrics:   /api/v1/health, /api/v1/metrics
```

### ĞŸÑ€Ğ¾ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğº ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼

Gateway Ğ¿Ñ€Ğ¾ĞºÑĞ¸Ñ€ÑƒĞµÑ‚ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğº Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼ Ñ‡ĞµÑ€ĞµĞ· RPC:

```typescript
// src/gateway/endpoints/user-endpoints.ts
import { api } from 'encore.dev/api';
import { users } from '~encore/clients'; // RPC client

export const getCurrentUser = api(
  { method: 'GET', path: '/api/v1/users/me', expose: true, auth: true },
  async (): Promise<ApiResponse<UserProfile>> => {
    const authData = getAuthData() as AuthData;

    // ĞŸÑ€Ğ¾ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğº user-management ÑĞµÑ€Ğ²Ğ¸ÑÑƒ
    const result = await users.getMyProfile();

    return {
      data: result,
      message: 'User profile retrieved',
    };
  }
);
```

---

## ğŸ”§ ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸Ñ ÑĞ»ĞµĞ´ÑƒĞµÑ‚ ĞµĞ´Ğ¸Ğ½Ğ¾Ğ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğµ:

```
src/services/[service-name]/
â”œâ”€â”€ encore.service.ts    # Service definition Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾
â”œâ”€â”€ api.ts              # RPC endpoint Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
â”œâ”€â”€ service.ts          # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· ResourceResolver
â””â”€â”€ src/
    â”œâ”€â”€ index.ts        # Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ñ‹
    â””â”€â”€ models/         # TypeScript Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
        â””â”€â”€ [entity].ts
```

### 1. User Management Service

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸, Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ, Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸

**RPC API Functions:**

```typescript
// src/services/user-management/api.ts
export const listUsers = api(
  { auth: true, method: 'GET', path: '/users/list' },
  async ({ limit, offset }): Promise<ApiResponse<UserProfile[]>> => {
    const users = await queryResource<UserProfile>(authData.tenantId, 'user_profiles', {
      limit,
      offset,
    });
    return { data: users };
  }
);

export const getMyProfile = api(
  { auth: true, method: 'GET', path: '/users/me' },
  async (): Promise<ApiResponse<UserProfile>> => {
    const authData = getAuthData() as AuthData;
    const profile = await getResource<UserProfile>(
      authData.tenantId,
      'user_profiles',
      authData.userID
    );
    return { data: profile };
  }
);
```

### 2. Tenant Management Service

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ°Ğ¼Ğ¸, ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸, admin Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**

- Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ admin Supabase Ğ‘Ğ”
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ¾Ğ²
- Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ğµ tenant Ğ‘Ğ”

```typescript
// src/services/tenant-management/api.ts
export const createTenant = api(
  { auth: true, method: 'POST', path: '/tenants' },
  async (createData: CreateTenantRequest): Promise<ApiResponse<Tenant>> => {
    // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ admin DB, Ğ½Ğµ ResourceResolver
    return TenantService.createNewTenant(createData);
  }
);

export const getTenantConfig = api(
  { auth: true, method: 'GET', path: '/tenants/:tenantId/config' },
  async ({ tenantId }): Promise<ApiResponse<TenantConfig>> => {
    return TenantService.getTenantConfiguration(tenantId);
  }
);
```

### 3. Content Management Service

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ¾Ğ¼ Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ Ğ²ÑĞµÑ… Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€Ğ¾Ğ²

```typescript
// src/services/content-management/api.ts
export const createContent = api(
  { auth: true, method: 'POST', path: '/content' },
  async (data: CreateContentRequest): Promise<ApiResponse<Content>> => {
    const authData = getAuthData() as AuthData;

    const content = await createResource<Content>(authData.tenantId, 'content', data);

    return { data: content };
  }
);
```

---

## ğŸ” Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸

### AuthHandler

Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚:

```typescript
// src/gateway/auth.ts
export interface AuthParams {
  authorization: Header<'Authorization'>; // Bearer token Ğ¸Ğ»Ğ¸ API key
  tenantId: Header<'X-Tenant-ID'>; // ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ tenant ID
}

export interface AuthData {
  userID: string;
  tenantId: string;
  userEmail?: string;
  userRole?: string;
  tokenType: 'jwt' | 'api_key';
}

export const auth = authHandler<AuthParams, AuthData>(
  async (params: AuthParams): Promise<AuthData> => {
    const { authorization, tenantId } = params;

    // 1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ tenant ID
    if (!tenantId) {
      throw APIError.invalidArgument('X-Tenant-ID header is required');
    }

    // 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ°
    const hasConfig = await hasTenantConfig(tenantId);
    if (!hasConfig) {
      throw APIError.notFound(`Tenant '${tenantId}' not found or inactive`);
    }

    // 3. ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ authorization header
    let tokenType: 'jwt' | 'api_key';
    let token: string;

    if (authorization.startsWith('Bearer ')) {
      tokenType = 'jwt';
      token = authorization.substring(7);
    } else if (authorization.startsWith('ApiKey ')) {
      tokenType = 'api_key';
      token = authorization.substring(7);
    } else {
      throw APIError.unauthenticated('Invalid authorization format');
    }

    // 4. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‚Ğ¾ĞºĞµĞ½Ğ°
    if (tokenType === 'jwt') {
      return await validateJWTToken(token, tenantId);
    } else {
      return await validateApiKey(token, tenantId);
    }
  }
);
```

### Ğ¢Ğ¸Ğ¿Ñ‹ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸

#### JWT Ñ‚Ğ¾ĞºĞµĞ½Ñ‹

```typescript
async function validateJWTToken(token: string, tenantId: string): Promise<AuthData> {
  const config = await getTenantConfigById(tenantId);
  const supabase = createClient(config.SUPABASE_URL, config.ANON_KEY);

  const {
    data: { user },
    error,
  } = await supabase.auth.getUser(token);

  if (error || !user) {
    throw new Error('Invalid JWT token');
  }

  return {
    userID: user.id,
    tenantId,
    userEmail: user.email,
    userRole: user.user_metadata?.role || 'user',
    tokenType: 'jwt',
  };
}
```

#### API ĞºĞ»ÑÑ‡Ğ¸

```typescript
async function validateApiKey(apiKey: string, tenantId: string): Promise<AuthData> {
  const config = await getTenantConfigById(tenantId);

  // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° API ĞºĞ»ÑÑ‡Ğ° Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ² service key Ğ´Ğ»Ñ admin Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
  if (apiKey === config.SERVICE_KEY) {
    return {
      userID: 'service',
      tenantId,
      tokenType: 'api_key',
      userRole: 'service',
    };
  }

  throw new Error('Invalid API key');
}
```

---

## ğŸ¢ ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸

1. **Ğ¡Ñ‚Ñ€Ğ¾Ğ³Ğ°Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** - ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚ Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½ÑƒÑ Ğ‘Ğ”
2. **Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ** - ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ¾Ğ² Ğ² admin Ğ‘Ğ”
3. **ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€Ğ°** - Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ñƒ ĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ¾Ñ€Ğ° Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ°
4. **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°** - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° X-Tenant-ID Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° tenant ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸

```typescript
// src/lib/types/tenant.ts
export interface TenantConfig {
  tenantId: string;
  connectorType: 'supabase' | 'postgres' | 'mongodb';

  // Supabase ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
  SUPABASE_URL?: string;
  SUPABASE_ANON_KEY?: string;
  SERVICE_KEY?: string;

  // PostgreSQL ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
  POSTGRES_HOST?: string;
  POSTGRES_PORT?: number;
  POSTGRES_DB?: string;
  POSTGRES_USER?: string;
  POSTGRES_PASSWORD?: string;

  // MongoDB ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
  MONGODB_URI?: string;
  MONGODB_DB?: string;

  // Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
  features: string[];
  limits: {
    maxUsers: number;
    maxStorage: number;
  };
  customization: Record<string, any>;
}
```

### Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¹

ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ¾Ğ² Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ² admin Supabase Ğ‘Ğ”:

```sql
-- Admin Supabase ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
CREATE TABLE tenants (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  domain TEXT,
  connector_type TEXT NOT NULL DEFAULT 'supabase',
  config JSONB NOT NULL DEFAULT '{}',
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE tenant_configs (
  tenant_id UUID REFERENCES tenants(id),
  config_key TEXT NOT NULL,
  config_value TEXT NOT NULL,
  is_encrypted BOOLEAN DEFAULT false,
  PRIMARY KEY (tenant_id, config_key)
);
```

### ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ°

```typescript
// src/lib/utils/tenant-config.ts
export async function getTenantConfigById(tenantId: string): Promise<TenantConfig> {
  const adminSupabase = createClient(
    process.env.ADMIN_SUPABASE_URL!,
    process.env.ADMIN_SUPABASE_SERVICE_KEY!
  );

  // ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾ Ğ¾ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğµ
  const { data: tenant } = await adminSupabase
    .from('tenants')
    .select('*')
    .eq('id', tenantId)
    .eq('is_active', true)
    .single();

  if (!tenant) {
    throw new Error(`Tenant ${tenantId} not found`);
  }

  // ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
  const { data: configs } = await adminSupabase
    .from('tenant_configs')
    .select('*')
    .eq('tenant_id', tenantId);

  // Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
  const config: TenantConfig = {
    tenantId,
    connectorType: tenant.connector_type,
    ...tenant.config,
  };

  // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ñ… ĞºĞ»ÑÑ‡ĞµĞ¹
  configs?.forEach(({ config_key, config_value }) => {
    config[config_key] = config_value;
  });

  return config;
}
```

### Middleware Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ°

```typescript
// src/gateway/middleware/tenant-validation.ts
export const tenantValidationMiddleware = middleware(
  { target: { auth: false } },
  async (req, next) => {
    const tenantId = req.data.headers?.['x-tenant-id'];

    if (!tenantId) {
      throw APIError.invalidArgument('X-Tenant-ID header is required');
    }

    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ°
    const hasConfig = await hasTenantConfig(tenantId);
    if (!hasConfig) {
      throw APIError.notFound(`Tenant '${tenantId}' not found or inactive`);
    }

    return await next(req);
  }
);
```

---

## ğŸ”Œ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ² Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡Ğ¸Ğ²Ğ°ĞµÑ‚ ÑƒĞ½Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¼ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼ Ğ‘Ğ” Ñ‡ĞµÑ€ĞµĞ· adapter pattern:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RESOURCE RESOLVER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  queryResource() â”‚ getResource() â”‚ createResource()        â”‚ â”‚
â”‚  â”‚  updateResource()â”‚ deleteResource() â”‚ countResources()     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CONNECTOR REGISTRY                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           getAdapterForTenant(tenantId, resource)           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ â”‚
â”‚  â”‚  â”‚  Supabase   â”‚ â”‚ PostgreSQL  â”‚ â”‚  MongoDB    â”‚           â”‚ â”‚
â”‚  â”‚  â”‚   Factory   â”‚ â”‚   Factory   â”‚ â”‚   Factory   â”‚           â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BASE ADAPTER                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  connect() â”‚ query() â”‚ insert() â”‚ update() â”‚ delete()       â”‚ â”‚
â”‚  â”‚  queryOne() â”‚ count() â”‚ disconnect()                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Base Adapter Interface

```typescript
// src/connectors/base.ts
export interface QueryParams {
  filter?: Record<string, any>;
  limit?: number;
  offset?: number;
  select?: string | string[];
  orderBy?: { field: string; direction: 'asc' | 'desc' }[];
}

export interface Adapter<T = any> {
  connect(): Promise<void>;
  disconnect?(): Promise<void>;
  query(params?: QueryParams): Promise<T[]>;
  queryOne(id: string): Promise<T | null>;
  insert(data: Omit<T, 'id'>): Promise<T>;
  update(id: string, data: Partial<T>): Promise<T | null>;
  delete(id: string): Promise<boolean>;
  count(filter?: Record<string, any>): Promise<number>;
}

export interface AdapterConfig {
  type: 'supabase' | 'postgres' | 'mongodb';
  [key: string]: any;
}

export type AdapterFactory<T = any> = (config: AdapterConfig & { table: string }) => Adapter<T>;
```

### Supabase Adapter

```typescript
// src/connectors/supabase.ts
export function createSupabaseAdapter<T = any>(
  config: AdapterConfig & { table: string }
): Adapter<T> {
  let client: SupabaseClient;

  return {
    async connect() {
      client = createClient(config.SUPABASE_URL, config.SUPABASE_ANON_KEY);
    },

    async query(params: QueryParams = {}) {
      let query = client.from(config.table).select(params.select || '*');

      if (params.filter) {
        Object.entries(params.filter).forEach(([key, value]) => {
          query = query.eq(key, value);
        });
      }

      if (params.orderBy) {
        params.orderBy.forEach(({ field, direction }) => {
          query = query.order(field, { ascending: direction === 'asc' });
        });
      }

      if (params.limit) query = query.limit(params.limit);
      if (params.offset)
        query = query.range(params.offset, params.offset + (params.limit || 10) - 1);

      const { data, error } = await query;
      if (error) throw error;
      return data as T[];
    },

    async queryOne(id: string) {
      const { data, error } = await client.from(config.table).select('*').eq('id', id).single();

      if (error && error.code !== 'PGRST116') throw error;
      return data as T | null;
    },

    async insert(data: Omit<T, 'id'>) {
      const { data: result, error } = await client
        .from(config.table)
        .insert(data)
        .select()
        .single();

      if (error) throw error;
      return result as T;
    },

    async update(id: string, data: Partial<T>) {
      const { data: result, error } = await client
        .from(config.table)
        .update(data)
        .eq('id', id)
        .select()
        .single();

      if (error) throw error;
      return result as T;
    },

    async delete(id: string) {
      const { error } = await client.from(config.table).delete().eq('id', id);

      if (error) throw error;
      return true;
    },

    async count(filter: Record<string, any> = {}) {
      let query = client.from(config.table).select('*', { count: 'exact', head: true });

      Object.entries(filter).forEach(([key, value]) => {
        query = query.eq(key, value);
      });

      const { count, error } = await query;
      if (error) throw error;
      return count || 0;
    },
  };
}
```

### Connector Registry

```typescript
// src/connectors/registry/connector-registry.ts
const adapterFactories: Record<string, AdapterFactory> = {
  supabase: createSupabaseAdapter,
  postgres: createPostgresAdapter,
  mongodb: createMongoAdapter,
};

export async function getAdapterForTenant<T = any>(
  tenantId: string,
  resource: string
): Promise<Adapter<T>> {
  // ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ°
  const tenantConfig = await getTenantConfigById(tenantId);

  // Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ„Ğ°Ğ±Ñ€Ğ¸ĞºĞ¸ Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€Ğ°
  const factory = adapterFactories[tenantConfig.connectorType];
  if (!factory) {
    throw new Error(`Unsupported connector type: ${tenantConfig.connectorType}`);
  }

  // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€Ğ°
  const adapter = factory({
    type: tenantConfig.connectorType,
    table: resource,
    ...tenantConfig,
  });

  // ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
  await adapter.connect();

  return adapter;
}
```

### Resource Resolver

```typescript
// src/connectors/registry/resource-resolver.ts
export async function queryResource<T = any>(
  tenantId: string,
  resource: string,
  params?: QueryParams
): Promise<T[]> {
  const adapter = await getAdapterForTenant(tenantId, resource);
  return adapter.query(params) as Promise<T[]>;
}

export async function createResource<T = any>(
  tenantId: string,
  resource: string,
  data: Omit<T, 'id'>
): Promise<T> {
  const adapter = await getAdapterForTenant(tenantId, resource);
  return adapter.insert(data) as Promise<T>;
}

export async function queryResourcesPaginated<T = any>(
  tenantId: string,
  resource: string,
  params: {
    filter?: Record<string, any>;
    page?: number;
    pageSize?: number;
    orderBy?: { field: string; direction: 'asc' | 'desc' }[];
    select?: string | string[];
  } = {}
): Promise<{
  data: T[];
  pagination: {
    page: number;
    pageSize: number;
    total: number;
    totalPages: number;
  };
}> {
  const { filter = {}, page = 1, pageSize = 10, orderBy, select } = params;

  const adapter = await getAdapterForTenant(tenantId, resource);

  // ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±Ñ‰ĞµĞ³Ğ¾ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ°
  const total = await adapter.count(filter);
  const totalPages = Math.ceil(total / pageSize);
  const offset = (page - 1) * pageSize;

  // ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸ĞµĞ¹
  const data = (await adapter.query({
    filter,
    limit: pageSize,
    offset,
    orderBy,
    select,
  })) as T[];

  return {
    data,
    pagination: {
      page,
      pageSize,
      total,
      totalPages,
    },
  };
}
```

---

## ğŸ“‹ Extensions Definitions

### ĞĞ±Ğ·Ğ¾Ñ€ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğ¹

Extensions Definitions Ğ² HelpDev New Supabase Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾Ğ±Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ Ğ»ÑĞ±Ñ‹Ñ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ÑÑ…ĞµĞ¼Ñ‹ Ğ‘Ğ”.

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†

#### extension_table_definitions

ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµĞ¼Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹:

```sql
CREATE TABLE extension_table_definitions (
  id BIGINT PRIMARY KEY,
  entity_table TEXT NOT NULL,        -- Ğ˜Ğ¼Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ
  field_name TEXT NOT NULL,          -- Slug-Ğ¸Ğ¼Ñ Ğ¿Ğ¾Ğ»Ñ
  field_type TEXT NOT NULL,          -- Ğ¢Ğ¸Ğ¿ Ğ¿Ğ¾Ğ»Ñ PostgreSQL
  display_name TEXT NOT NULL,        -- ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ğ¾Ğµ Ğ¸Ğ¼Ñ Ğ² UI
  is_required BOOLEAN DEFAULT false,
  default_value TEXT,
  is_active BOOLEAN DEFAULT true,    -- Ğ¤Ğ»Ğ°Ğ³ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### extension_table_values

Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµĞ¼Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ² JSONB Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ:

```sql
CREATE TABLE extension_table_values (
  id BIGINT PRIMARY KEY,
  entity_table TEXT NOT NULL,       -- Ğ˜Ğ¼Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
  entity_id UUID NOT NULL,          -- ID Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ² Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ
  field_data JSONB NOT NULL DEFAULT '{}', -- Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ² JSONB
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹

1. **ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ĞµĞ¹** - Ğ’ `extension_table_definitions` ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ÑÑ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ´Ğ»Ñ Ğ»ÑĞ±Ğ¾Ğ¹ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
2. **Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹** - Ğ’ `extension_table_values` Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ñ„Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ² JSONB Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ
3. **Ğ¡Ğ²ÑĞ·ÑŒ Ñ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğ¼Ğ¸ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°Ğ¼Ğ¸** - Ğ§ĞµÑ€ĞµĞ· `entity_table` + `entity_id`

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

#### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµĞ¼Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ´Ğ»Ñ Ğ»Ğ¸Ğ´Ğ¾Ğ²:

```sql
-- ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ´Ğ»Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ lead
INSERT INTO extension_table_definitions (
  entity_table, field_name, field_type, display_name, is_required
) VALUES
  ('lead', 'budget_range', 'text', 'Ğ”Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ°', false),
  ('lead', 'decision_maker', 'text', 'Ğ›Ğ¸Ñ†Ğ¾ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ÑÑ‰ĞµĞµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ', true),
  ('lead', 'timeline', 'date', 'ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğµ ÑÑ€Ğ¾ĞºĞ¸', false),
  ('lead', 'custom_tags', 'jsonb', 'ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğµ Ñ‚ĞµĞ³Ğ¸', false);
```

#### Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹:

```sql
-- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ğ»Ğ¸Ğ´Ğ°
INSERT INTO extension_table_values (
  entity_table, entity_id, field_data
) VALUES (
  'lead',
  'lead-uuid-here',
  '{
    "budget_range": "50000-100000",
    "decision_maker": "Ğ˜Ğ²Ğ°Ğ½ ĞŸĞµÑ‚Ñ€Ğ¾Ğ²",
    "timeline": "2024-03-15",
    "custom_tags": ["urgent", "enterprise", "b2b"]
  }'
);
```

### Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Simplx Platform

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Extensions Definitions Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ² Simplx Platform Ñ‡ĞµÑ€ĞµĞ·:

#### 1. Resource Resolver Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ

```typescript
// src/connectors/registry/extension-resolver.ts
export async function queryResourceWithExtensions<T = any>(
  tenantId: string,
  resource: string,
  entityId: string,
  params?: QueryParams
): Promise<T & { extensions?: Record<string, any> }> {
  // ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
  const baseData = await getResource<T>(tenantId, resource, entityId);

  // ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹
  const extensions = await getExtensionFields(tenantId, resource, entityId);

  return {
    ...baseData,
    extensions,
  };
}

async function getExtensionFields(
  tenantId: string,
  entityTable: string,
  entityId: string
): Promise<Record<string, any>> {
  const adapter = await getAdapterForTenant(tenantId, 'extension_table_values');

  const extensionData = await adapter.queryOne({
    filter: {
      entity_table: entityTable,
      entity_id: entityId,
    },
  });

  return extensionData?.field_data || {};
}
```

#### 2. API Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸ÑĞ¼Ğ¸

```typescript
// src/services/content-management/api.ts
export const getEntityWithExtensions = api(
  { auth: true, method: 'GET', path: '/content/:type/:id/extended' },
  async ({ type, id }): Promise<ApiResponse<any>> => {
    const authData = getAuthData() as AuthData;

    const entityWithExtensions = await queryResourceWithExtensions(authData.tenantId, type, id);

    return { data: entityWithExtensions };
  }
);

export const updateEntityExtensions = api(
  { auth: true, method: 'PUT', path: '/content/:type/:id/extensions' },
  async ({ type, id, extensions }): Promise<ApiResponse<boolean>> => {
    const authData = getAuthData() as AuthData;

    await updateExtensionFields(authData.tenantId, type, id, extensions);

    return { data: true, message: 'Extensions updated' };
  }
);
```

#### 3. Ğ¡Ñ…ĞµĞ¼Ğ° Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğ¹

```typescript
// src/lib/types/extensions.ts
export interface ExtensionFieldDefinition {
  id: number;
  entityTable: string;
  fieldName: string;
  fieldType: 'text' | 'number' | 'boolean' | 'date' | 'jsonb';
  displayName: string;
  isRequired: boolean;
  defaultValue?: string;
  isActive: boolean;
}

export interface ExtensionFieldValue {
  entityTable: string;
  entityId: string;
  fieldData: Record<string, any>;
}

// Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹
export async function validateExtensionData(
  tenantId: string,
  entityTable: string,
  fieldData: Record<string, any>
): Promise<{ valid: boolean; errors: string[] }> {
  // ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ĞµĞ¹
  const definitions = await queryResource<ExtensionFieldDefinition>(
    tenantId,
    'extension_table_definitions',
    { filter: { entity_table: entityTable, is_active: true } }
  );

  const errors: string[] = [];

  // Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ñ
  definitions.forEach((def) => {
    const value = fieldData[def.fieldName];

    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹
    if (def.isRequired && !value) {
      errors.push(`Field '${def.displayName}' is required`);
    }

    // Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‚Ğ¸Ğ¿Ğ¾Ğ²
    if (value && !validateFieldType(value, def.fieldType)) {
      errors.push(`Field '${def.displayName}' has invalid type`);
    }
  });

  return { valid: errors.length === 0, errors };
}
```

---

## â• ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

### Ğ¨Ğ°Ğ³ 1: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ ÑĞµÑ€Ğ²Ğ¸ÑĞ°

```bash
mkdir -p src/services/new-service/src/models
touch src/services/new-service/encore.service.ts
touch src/services/new-service/api.ts
touch src/services/new-service/service.ts
touch src/services/new-service/src/index.ts
touch src/services/new-service/src/models/entity.ts
```

### Ğ¨Ğ°Ğ³ 2: Service Definition

```typescript
// src/services/new-service/encore.service.ts
import { Service } from 'encore.dev';

export default new Service('new-service');
```

### Ğ¨Ğ°Ğ³ 3: ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```typescript
// src/services/new-service/src/models/entity.ts
export interface NewEntity {
  id: string;
  name: string;
  description?: string;
  tenantId: string;
  createdAt: string;
  updatedAt: string;
}

export interface CreateNewEntityRequest {
  name: string;
  description?: string;
}

export interface UpdateNewEntityRequest {
  name?: string;
  description?: string;
}
```

### Ğ¨Ğ°Ğ³ 4: Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· ResourceResolver

```typescript
// src/services/new-service/service.ts
import {
  queryResource,
  createResource,
  updateResource,
  deleteResource,
} from '../../connectors/registry/resource-resolver';
import type {
  NewEntity,
  CreateNewEntityRequest,
  UpdateNewEntityRequest,
} from './src/models/entity';

export async function getEntityList(
  tenantId: string,
  params: { limit?: number; offset?: number } = {}
): Promise<NewEntity[]> {
  return queryResource<NewEntity>(tenantId, 'new_entities', {
    limit: params.limit || 50,
    offset: params.offset || 0,
    orderBy: [{ field: 'created_at', direction: 'desc' }],
  });
}

export async function getEntityById(tenantId: string, entityId: string): Promise<NewEntity | null> {
  return getResource<NewEntity>(tenantId, 'new_entities', entityId);
}

export async function createNewEntity(
  tenantId: string,
  data: CreateNewEntityRequest
): Promise<NewEntity> {
  return createResource<NewEntity>(tenantId, 'new_entities', {
    ...data,
    tenantId,
    createdAt: new Date().toISOString(),
    updatedAt: new Date().toISOString(),
  });
}

export async function updateExistingEntity(
  tenantId: string,
  entityId: string,
  data: UpdateNewEntityRequest
): Promise<NewEntity | null> {
  return updateResource<NewEntity>(tenantId, 'new_entities', entityId, {
    ...data,
    updatedAt: new Date().toISOString(),
  });
}

export async function deleteEntity(tenantId: string, entityId: string): Promise<boolean> {
  return deleteResource(tenantId, 'new_entities', entityId);
}
```

### Ğ¨Ğ°Ğ³ 5: RPC API Functions

```typescript
// src/services/new-service/api.ts
import { api, Query } from 'encore.dev/api';
import { getAuthData } from '~encore/auth';
import type { AuthData } from '../../gateway/auth';
import type { ApiResponse } from '../../lib/types';
import * as NewService from './service';

export const listEntities = api(
  { auth: true, method: 'GET', path: '/entities/list' },
  async ({
    limit,
    offset,
  }: {
    limit?: Query<number>;
    offset?: Query<number>;
  }): Promise<ApiResponse<NewEntity[]>> => {
    const authData = getAuthData() as AuthData;

    const entities = await NewService.getEntityList(authData.tenantId, {
      limit,
      offset,
    });

    return {
      data: entities,
      message: 'Entities retrieved successfully',
    };
  }
);

export const getEntity = api(
  { auth: true, method: 'GET', path: '/entities/:entityId' },
  async ({ entityId }: { entityId: string }): Promise<ApiResponse<NewEntity>> => {
    const authData = getAuthData() as AuthData;

    const entity = await NewService.getEntityById(authData.tenantId, entityId);

    if (!entity) {
      throw new Error(`Entity with ID ${entityId} not found`);
    }

    return {
      data: entity,
      message: 'Entity retrieved successfully',
    };
  }
);

export const createEntity = api(
  { auth: true, method: 'POST', path: '/entities' },
  async (data: CreateNewEntityRequest): Promise<ApiResponse<NewEntity>> => {
    const authData = getAuthData() as AuthData;

    const entity = await NewService.createNewEntity(authData.tenantId, data);

    return {
      data: entity,
      message: 'Entity created successfully',
    };
  }
);

export const updateEntity = api(
  { auth: true, method: 'PUT', path: '/entities/:entityId' },
  async ({
    entityId,
    ...updateData
  }: UpdateNewEntityRequest & { entityId: string }): Promise<ApiResponse<NewEntity>> => {
    const authData = getAuthData() as AuthData;

    const entity = await NewService.updateExistingEntity(authData.tenantId, entityId, updateData);

    if (!entity) {
      throw new Error(`Entity with ID ${entityId} not found`);
    }

    return {
      data: entity,
      message: 'Entity updated successfully',
    };
  }
);

export const deleteEntity = api(
  { auth: true, method: 'DELETE', path: '/entities/:entityId' },
  async ({ entityId }: { entityId: string }): Promise<ApiResponse<boolean>> => {
    const authData = getAuthData() as AuthData;

    const success = await NewService.deleteEntity(authData.tenantId, entityId);

    return {
      data: success,
      message: 'Entity deleted successfully',
    };
  }
);
```

### Ğ¨Ğ°Ğ³ 6: Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ñ‹

```typescript
// src/services/new-service/src/index.ts
export * from './models/entity';
export * as NewService from '../service';
```

### Ğ¨Ğ°Ğ³ 7: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ² Gateway

```typescript
// src/gateway/endpoints/new-service-endpoints.ts
import { api, Query } from 'encore.dev/api';
import { getAuthData } from '~encore/auth';
import type { AuthData } from '../auth';
import { newService } from '../utils/service-clients';

export const listEntities = api(
  { method: 'GET', path: '/api/v1/entities', expose: true, auth: true },
  async ({
    limit,
    offset,
  }: {
    limit?: Query<number>;
    offset?: Query<number>;
  }): Promise<ApiResponse<NewEntity[]>> => {
    // ĞŸÑ€Ğ¾ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğº new-service
    const result = await newService.listEntities({ limit, offset });

    return {
      data: result.data,
      message: 'Entities retrieved',
    };
  }
);

export const createEntity = api(
  { method: 'POST', path: '/api/v1/entities', expose: true, auth: true },
  async (data: CreateNewEntityRequest): Promise<ApiResponse<NewEntity>> => {
    const result = await newService.createEntity(data);

    return {
      data: result.data,
      message: 'Entity created',
    };
  }
);
```

### Ğ¨Ğ°Ğ³ 8: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ service-clients

```typescript
// src/gateway/utils/service-clients.ts
import {
  users,
  tenants,
  content,
  newService, // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ
} from '~encore/clients';

export const userManagementClient = users;
export const tenantManagementClient = tenants;
export const contentManagementClient = content;
export const newServiceClient = newService; // Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
```

### Ğ¨Ğ°Ğ³ 9: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ encore.app

```json
{
  "id": "",
  "lang": "typescript",
  "services": {
    "api-gateway": { "path": "./src/gateway" },
    "tenant-management": { "path": "./src/services/tenant-management" },
    "user-management": { "path": "./src/services/user-management" },
    "content-management": { "path": "./src/services/content-management" },
    "new-service": { "path": "./src/services/new-service" }
  }
}
```

### Ğ¨Ğ°Ğ³ 10: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† Ğ² Ğ‘Ğ” Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ¾Ğ²

Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ñ‚Ğ¸Ğ¿Ğ° ĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ¾Ñ€Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹:

#### Supabase/PostgreSQL:

```sql
CREATE TABLE new_entities (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  description TEXT,
  tenant_id UUID NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- RLS Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸
ALTER TABLE new_entities ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can access their tenant data"
ON new_entities FOR ALL
USING (tenant_id = (current_setting('app.current_tenant_id'))::UUID);
```

#### MongoDB:

```javascript
// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸ Ğ¸ Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ²
db.createCollection('new_entities');
db.new_entities.createIndex({ tenant_id: 1 });
db.new_entities.createIndex({ created_at: -1 });
```

---

## âš™ï¸ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸ ÑÑ€ĞµĞ´Ğ°

### Environment Variables

```bash
# Application
NODE_ENV=development
PORT=4000
HOST=0.0.0.0
LOG_LEVEL=debug

# Admin Database (Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ°Ğ¼Ğ¸)
ADMIN_SUPABASE_URL=https://your-admin-project.supabase.co
ADMIN_SUPABASE_SERVICE_KEY=your-admin-service-key

# Gateway Configuration
CORS_ORIGINS=["http://localhost:3000", "http://localhost:5173"]
LOG_FORMAT=json

# Features
ENABLE_METRICS=true
ENABLE_HEALTH_CHECKS=true
ENABLE_CACHING=true
ENABLE_RATE_LIMITING=true

# Performance
REQUEST_TIMEOUT=30000
MAX_CONNECTIONS=1000
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60000

# Connectors
DEFAULT_CONNECTOR=supabase
SUPABASE_CONNECTOR_ENABLED=true
SUPABASE_POOL_SIZE=10
SUPABASE_TIMEOUT=30000

# Gateway
GATEWAY_PREFIX=/api
GATEWAY_VERSION=v1
GATEWAY_ENABLE_PROXY=true
```

### TypeScript Configuration

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ESNext",
    "moduleResolution": "node",
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true,
    "strict": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "baseUrl": ".",
    "paths": {
      "@config/*": ["src/config/*"],
      "@connectors/*": ["src/connectors/*"],
      "@gateway/*": ["src/gateway/*"],
      "@services/*": ["src/services/*"],
      "@shared/*": ["src/shared/*"],
      "@lib/*": ["src/lib/*"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

### Package.json Scripts

```json
{
  "scripts": {
    "dev": "encore run",
    "dev:watch": "encore run --watch",
    "build": "encore build",
    "build:prod": "encore build --env=prod",
    "deploy": "encore deploy",
    "deploy:staging": "encore deploy --env=staging",
    "deploy:prod": "encore deploy --env=prod",
    "lint": "tsc --noEmit",
    "type-check": "tsc --noEmit --skipLibCheck",
    "gen": "encore gen client",
    "test": "vitest",
    "test:coverage": "vitest --coverage"
  }
}
```

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

```json
{
  "dependencies": {
    "@supabase/supabase-js": "^2.52.0",
    "encore.dev": "^1.48.10",
    "pg": "^8.11.3",
    "mongodb": "^6.3.0",
    "dotenv": "^17.2.0"
  },
  "devDependencies": {
    "@types/node": "^20.5.7",
    "@types/pg": "^8.10.9",
    "typescript": "^5.2.2",
    "vitest": "^1.5.0"
  }
}
```

---

## ğŸ” Best Practices Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

### 1. Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´

```typescript
// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾ - Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ°Ğ±Ñ€Ğ¸ĞºĞ¸
export function createAdapter(config: AdapterConfig): Adapter {
  return {
    async query() {
      /* implementation */
    },
    async insert() {
      /* implementation */
    },
  };
}

// âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾ - ĞºĞ»Ğ°ÑÑÑ‹
export class AdapterClass {
  constructor(config: AdapterConfig) {}
  async query() {
    /* implementation */
  }
}
```

### 2. ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

```typescript
// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾ - ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸
export interface ApiResponse<T> {
  data?: T;
  message: string;
  error?: {
    code: string;
    message: string;
    details?: any;
  };
}

// Ğ’ API Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑÑ…
try {
  const result = await someOperation();
  return { data: result, message: 'Success' };
} catch (error) {
  throw APIError.internal('Operation failed', { cause: error });
}
```

### 3. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ¾Ğ²

```typescript
// âœ… Ğ’ÑĞµĞ³Ğ´Ğ° Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞ¹Ñ‚Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ñƒ
export const someApiFunction = api(
  { auth: true, method: 'GET', path: '/resource' },
  async (): Promise<ApiResponse<any>> => {
    const authData = getAuthData() as AuthData;

    // Ğ¢ĞµĞ½Ğ°Ğ½Ñ‚ ÑƒĞ¶Ğµ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ² middleware, Ğ½Ğ¾ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
    const hasAccess = await validateTenantAccess(authData.tenantId, 'resource');
    if (!hasAccess) {
      throw APIError.permissionDenied('Access denied to tenant resource');
    }

    // ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
  }
);
```

### 4. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ResourceResolver

```typescript
// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾ - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ResourceResolver Ğ´Ğ»Ñ ÑƒĞ½Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
const users = await queryResource<User>(tenantId, 'users', {
  filter: { active: true },
  limit: 10,
  orderBy: [{ field: 'created_at', direction: 'desc' }],
});

// âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾ - Ğ¿Ñ€ÑĞ¼Ğ¾Ğµ Ğ¾Ğ±Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğº Ğ‘Ğ”
const supabase = createClient(url, key);
const { data } = await supabase.from('users').select('*');
```

### 5. Ğ¢Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

```typescript
// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾ - ÑÑ‚Ñ€Ğ¾Ğ³Ğ°Ñ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
export interface CreateUserRequest {
  email: string;
  name: string;
  role?: 'user' | 'admin';
}

export const createUser = api(
  { auth: true, method: 'POST', path: '/users' },
  async (data: CreateUserRequest): Promise<ApiResponse<User>> => {
    // TypeScript Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
  }
);

// âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾ - any Ñ‚Ğ¸Ğ¿Ñ‹
export const createUser = api(
  { auth: true, method: 'POST', path: '/users' },
  async (data: any): Promise<any> => {
    // ĞŸĞ¾Ñ‚ĞµÑ€Ñ Ñ‚Ğ¸Ğ¿Ğ¾Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸
  }
);
```

---

## ğŸ“š Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ

Ğ­Ñ‚Ğ¾Ñ‚ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğ¹ ÑĞ¿Ñ€Ğ°Ğ²Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¿Ğ¾ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ²ÑĞµ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ°ÑĞ¿ĞµĞºÑ‚Ñ‹ Simplx Platform:

- **API Gateway** ĞºĞ°Ğº ĞµĞ´Ğ¸Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Ñ middleware stack
- **ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹** Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¾Ğ¼ Ğ¸ RPC ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸ĞµĞ¹
- **ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ñ‚ĞµĞ½Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ** Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸ĞµĞ¹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼
- **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²** Ñ adapter pattern Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ‘Ğ”
- **Extensions Definitions** Ğ´Ğ»Ñ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ ÑÑ…ĞµĞ¼
- **ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²** Ñ Ğ¿Ğ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ñ‹Ğ¼ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾Ğ¼

Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑÑ‚Ğ¾Ñ‚ ÑĞ¿Ñ€Ğ°Ğ²Ğ¾Ñ‡Ğ½Ğ¸Ğº ĞºĞ°Ğº Ğ¾ÑĞ½Ğ¾Ğ²Ñƒ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ Ğ² Simplx Platform, ÑĞ»ĞµĞ´ÑƒÑ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğ¼ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ğ°Ğ¼ Ğ¸ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğ°Ğ¼ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹.

---

_ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ: 23 ÑĞ½Ğ²Ğ°Ñ€Ñ 2025_
